# src/experiment/conf/reg_sweep_experiment.yaml
#
# Entry-point config for Section 5.1 regularization sweep experiments.

defaults:
  - data: config
  - model: qrc_matern_krr
  - _self_

experiment:
  name: c-shadows       # Or set ``exact``.

seed: 12345

# Directory containing a saved dataset artifact (DatasetArtifact.root).
# Use `???` to force specifying it on the CLI / from a notebook.
dataset_path: ???

# Whether Experiment.from_paths should instantiate functional objects.
instantiate_functionals: false

reg_sweep:
  enabled: true
  # Regularization grid for lambda_reg (ridge). Spans 1e-12..1e0 in half-decades.
  reg_grid:
    - 1e-12
    - 1e-11
    - 1e-10
    - 1e-9
    - 1e-8
    - 1e-7
    - 1e-6
    - 1e-5
    - 1e-4
    - 1e-3
    - 5e-3
    - 1e-2
    - 5e-2
    - 1e-1
    - 5e-1
    - 1e0
    - 5e0
    - 1e1
    - 5e1
    - 1e2
    - 5e2
    - 1e3
    - 5e3
    - 1e4
    - 5e4
    - 1e5

output:
  # Base directory for experiment runs
  save_dir: ${oc.env:PROJECT_ROOT}/storage/results

  # Paths inside the *current* Hydra run directory
  model_dir: ${hydra:runtime.output_dir}/model
  sweep_path: ${hydra:runtime.output_dir}/reg_sweep.npz
  artifacts_dir: ${hydra:runtime.output_dir}/artifacts
  plot_formats: ["pdf"]

hydra:
  run:
    dir: ${output.save_dir}/reg_sweep/${experiment.name}/${data.sampling.name}/N=${data.sampling.N}__w=${data.sampling.w}__d=${data.sampling.d}__s=${data.sampling.s}/${now:%Y-%m-%d_%H-%M-%S}

  job_logging:
    handlers:
      file:
        filename: ${hydra:runtime.output_dir}/reg_sweep.log